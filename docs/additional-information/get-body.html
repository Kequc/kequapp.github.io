<!DOCTYPE html>
<html lang="en" class="h-full">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>getBody - Kequapp Documentation</title>
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
    <link href="/assets/style.css" rel="stylesheet">
    <script src="/assets/search.js" defer></script>
</head>

<body class="bg-gray-800 flex justify-center">
    <div class="max-w-[90rem] min-w-[60rem] w-full relative flex flex-col min-h-screen">
        <header class="bg-green-600 h-24 w-full fixed top-0 z-10 max-w-[90rem] flex items-center justify-between px-6">
            <div class="flex items-center space-x-6 max-h-full">
                <a href="/" class="bg-gray-100 rounded-lg py-2 px-4 flex items-center justify-center h-16">
                    <img src="/assets/logo.png" alt="Logo" class="h-full w-auto">
                </a>
                <div class="text-white space-x-3">
                    <span class="font-mono">\ `hek-y√º-ap \</span>
                    <span class="bg-green-700 px-2 py-1 rounded text-sm">v0.8.1</span>
                </div>
            </div>
            <div class="flex items-center space-x-6">
                <div class="search-container relative">
                    <input type="text" placeholder="Search" class="bg-green-700 text-white placeholder-green-300 pl-10 pr-10 py-2 rounded-full focus:outline-none focus:ring-2 focus:ring-green-300 w-80">
                    <svg class="absolute left-3 top-2.5 h-5 w-5 text-green-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                    <button class="clear-search absolute right-3 top-2.5 h-5 w-5 text-green-300 hidden" aria-label="Clear search">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <a href="https://www.npmjs.com/package/kequapp" target="_blank" rel="noopener noreferrer" class="text-white hover:text-green-300">
                    <svg class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0 7.334v8h6.666v1.332H12v-1.332h12v-8H0zm6.666 6.664H5.334v-4H3.999v4H1.335V8.667h5.331v5.331zm4 0v1.336H8.001V8.667h5.334v5.332h-2.669v-.001zm12.001 0h-1.33v-4h-1.336v4h-1.335v-4h-1.33v4h-2.671V8.667h8.002v5.331z" />
                        <path d="M10.665 10H12v2.667h-1.335V10z" />
                    </svg>
                </a>
                <a href="https://github.com/Kequc/kequapp" target="_blank" rel="noopener noreferrer" class="text-white hover:text-green-300">
                    <svg class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0012 2z" />
                    </svg>
                </a>
            </div>
        </header>
        <div class="flex flex-1 pt-24">
            <aside class="min-w-72 bg-gray-700 fixed top-24 bottom-16 overflow-y-auto max-w-80">
                <nav class="p-6 pb-10 sticky">
                    <h3 class="font-bold text-lg mt-4 mb-2 text-gray-200">Docs</h3>
                    <ul>
                        <li><a href="/" class="text-gray-300 hover:text-green-400 w-full block py-1">Introduction</a></li>
                        <li><a href="/docs/basic-concepts.html" class="text-gray-300 hover:text-green-400 w-full block py-1">Basic Concepts</a></li>
                    </ul>
                    <h3 class="font-bold text-lg mt-4 mb-2 text-gray-200">Getting Started</h3>
                    <ul>
                        <li><a href="/getting-started/installation.html" class="text-gray-300 hover:text-green-400 w-full block py-1">Installation</a></li>
                        <li><a href="/getting-started/hello-world.html" class="text-gray-300 hover:text-green-400 w-full block py-1">Hello World</a></li>
                    </ul>
                    <h3 class="font-bold text-lg mt-4 mb-2 text-gray-200">Core Api</h3>
                    <ul>
                        <li><a href="/core-api/create-app.html" class="text-gray-300 hover:text-green-400 w-full block py-1">createApp</a></li>
                        <li><a href="/core-api/create-branch.html" class="text-gray-300 hover:text-green-400 w-full block py-1">createBranch</a></li>
                        <li><a href="/core-api/create-route.html" class="text-gray-300 hover:text-green-400 w-full block py-1">createRoute</a></li>
                        <li><a href="/core-api/create-action.html" class="text-gray-300 hover:text-green-400 w-full block py-1">createAction</a></li>
                        <li><a href="/core-api/create-error-handler.html" class="text-gray-300 hover:text-green-400 w-full block py-1">createErrorHandler</a></li>
                        <li><a href="/core-api/create-renderer.html" class="text-gray-300 hover:text-green-400 w-full block py-1">createRenderer</a></li>
                    </ul>
                    <h3 class="font-bold text-lg mt-4 mb-2 text-gray-200">Advanced Usage</h3>
                    <ul>
                        <li><a href="/advanced-usage/responding-to-requests.html" class="text-gray-300 hover:text-green-400 w-full block py-1">Responding to Requests</a></li>
                        <li><a href="/advanced-usage/cors-and-options-requests.html" class="text-gray-300 hover:text-green-400 w-full block py-1">CORS and OPTIONS Requests</a></li>
                        <li><a href="/advanced-usage/head-requests.html" class="text-gray-300 hover:text-green-400 w-full block py-1">HEAD Requests</a></li>
                    </ul>
                    <h3 class="font-bold text-lg mt-4 mb-2 text-gray-200">Utilities</h3>
                    <ul>
                        <li><a href="/utilities/ex.html" class="text-gray-300 hover:text-green-400 w-full block py-1">Ex</a></li>
                        <li><a href="/utilities/static-directory.html" class="text-gray-300 hover:text-green-400 w-full block py-1">staticDirectory</a></li>
                        <li><a href="/utilities/send-file.html" class="text-gray-300 hover:text-green-400 w-full block py-1">sendFile</a></li>
                        <li><a href="/utilities/inject.html" class="text-gray-300 hover:text-green-400 w-full block py-1">inject</a></li>
                    </ul>
                    <h3 class="font-bold text-lg mt-4 mb-2 text-gray-200">Additional Information</h3>
                    <ul>
                        <li><a href="/additional-information/bundle-properties.html" class="text-gray-300 hover:text-green-400 w-full block py-1">Bundle Properties</a></li>
                        <li><a href="/additional-information/get-body.html" class="text-green-400 font-medium w-full block py-1">getBody</a></li>
                        <li><a href="/additional-information/logger.html" class="text-gray-300 hover:text-green-400 w-full block py-1">Logger</a></li>
                        <li><a href="/additional-information/conclusion.html" class="text-gray-300 hover:text-green-400 w-full block py-1">Conclusion</a></li>
                    </ul>
                </nav>
            </aside>
            <main class="flex-1 ml-80 p-8 mb-16">
                <!-- Main content -->
                <h1 class="text-white text-3xl mb-8"># getBody</h1>
                <div class="prose prose-invert max-w-none pb-8">
                    <p>Node delivers the body of a request in chunks.</p>
                    <p>It is not necessary to wait for the request to finish before processing it. In most cases, you just want the data and therefore a helper method <code>getBody</code> is provided which you may use to await body from the completed request.</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-title function_">createRoute</span>({
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/users&#x27;</span>,
    <span class="hljs-attr">actions</span>: [<span class="hljs-keyword">async</span> ({ getBody }) =&gt; {
        <span class="hljs-keyword">const</span> body = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getBody</span>();

        <span class="hljs-comment">// body ~= {</span>
        <span class="hljs-comment">//     name: &#x27;April&#x27;</span>
        <span class="hljs-comment">// }</span>

        <span class="hljs-keyword">return</span> <span class="hljs-string">`User creation <span class="hljs-subst">${body.name}</span>!`</span>;
    }]
});
</code></pre>
                    <p>It takes an options object which can be used to parse and normalize a client request into useful data in a large assortment of different ways.</p>
                    <h3>multipart</h3>
                    <p>Causes the method to return both <code>body</code> and <code>files</code>. If the client didn&#39;t send any files, or it wasn&#39;t a multipart request the second parameter will be an empty array.</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-title function_">createRoute</span>({
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/users&#x27;</span>,
    <span class="hljs-attr">actions</span>: [<span class="hljs-keyword">async</span> ({ getBody }) =&gt; {
        <span class="hljs-keyword">const</span> [body, files] = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getBody</span>({ <span class="hljs-attr">multipart</span>: <span class="hljs-literal">true</span> });

        <span class="hljs-comment">// body ~= {</span>
        <span class="hljs-comment">//     name: &#x27;April&#x27;</span>
        <span class="hljs-comment">// }</span>
        <span class="hljs-comment">// files ~= [{</span>
        <span class="hljs-comment">//     headers: {</span>
        <span class="hljs-comment">//         &#x27;content-disposition&#x27;: &#x27;form-data; name=&quot;avatar&quot; filename=&quot;my-cat.png&quot;&#x27;,</span>
        <span class="hljs-comment">//         &#x27;content-type&#x27;: &#x27;image/png;&#x27;</span>
        <span class="hljs-comment">//     },</span>
        <span class="hljs-comment">//     contentType: &#x27;image/png&#x27;,</span>
        <span class="hljs-comment">//     name: &#x27;avatar&#x27;,</span>
        <span class="hljs-comment">//     filename: &#x27;my-cat.png&#x27;,</span>
        <span class="hljs-comment">//     data: Buffer &lt;...&gt;</span>
        <span class="hljs-comment">// }]</span>

        <span class="hljs-keyword">return</span> <span class="hljs-string">`User creation <span class="hljs-subst">${body.name}</span>!`</span>;
    }]
});
</code></pre>
                    <h3>raw</h3>
                    <p>Causes the body to be processed as minimally as possible and return a single buffer. This is especially useful when your application expects a content type other than <code>&#39;application/x-www-form-urlencoded&#39;</code>, <code>&#39;application/json&#39;</code>, or <code>&#39;multipart/form-data&#39;</code>.</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-title function_">createRoute</span>({
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/users&#x27;</span>,
    <span class="hljs-attr">actions</span>: [<span class="hljs-keyword">async</span> ({ getBody }) =&gt; {
        <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getBody</span>({ <span class="hljs-attr">raw</span>: <span class="hljs-literal">true</span> });

        <span class="hljs-comment">// data ~= Buffer &lt;...&gt;</span>

        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Image received!&#x27;</span>;
    }]
});
</code></pre>
                    <p>When combined with <code>multipart</code>, the body is parsed into an array of separate buffers with their respective headers.</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-title function_">createRoute</span>({
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/users&#x27;</span>,
    <span class="hljs-attr">actions</span>: [<span class="hljs-keyword">async</span> ({ getBody }) =&gt; {
        <span class="hljs-keyword">const</span> parts = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getBody</span>({ <span class="hljs-attr">raw</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">multipart</span>: <span class="hljs-literal">true</span> });

        <span class="hljs-comment">// parts ~= [{</span>
        <span class="hljs-comment">//     headers: {</span>
        <span class="hljs-comment">//         &#x27;content-disposition&#x27;: &#x27;form-data; name=&quot;name&quot;&#x27;</span>
        <span class="hljs-comment">//     },</span>
        <span class="hljs-comment">//     data: Buffer &lt;...&gt;</span>
        <span class="hljs-comment">// }, {</span>
        <span class="hljs-comment">//     headers: {</span>
        <span class="hljs-comment">//         &#x27;content-disposition&#x27;: &#x27;form-data; name=&quot;avatar&quot; filename=&quot;my-cat.png&quot;&#x27;,</span>
        <span class="hljs-comment">//         &#x27;content-type&#x27;: &#x27;image/png;&#x27;</span>
        <span class="hljs-comment">//     },</span>
        <span class="hljs-comment">//     data: Buffer &lt;...&gt;</span>
        <span class="hljs-comment">// }]</span>

        <span class="hljs-keyword">return</span> <span class="hljs-string">`User creation <span class="hljs-subst">${parts[<span class="hljs-number">0</span>].data.toString()}</span>!`</span>;
    }]
});
</code></pre>
                    <h3>skipNormalize</h3>
                    <p>By default, the data received is pushed through some body normalization. This is so that the body you receive is in a format you&#39;d expect and is therefore easier to work with. Normalization is directed by <code>arrays</code>, <code>required</code>, <code>numbers</code>, <code>booleans</code>, and <code>validate</code>.</p>
                    <p>Disable body normalization with either <code>raw</code> or <code>skipNormalize</code>.</p>
                    <h3>arrays</h3>
                    <p>The provided list of fields are converted into arrays.</p>
                    <p>Fields that are not specified will return only the first value. This is because the framework only knows that a field is an array when it receives more than one value for a given name from the client. It would be inconvenient if parameters are sometimes arrays, and therefore instead are explicit.</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-title function_">createRoute</span>({
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/users&#x27;</span>,
    <span class="hljs-attr">actions</span>: [<span class="hljs-keyword">async</span> ({ getBody }) =&gt; {
        <span class="hljs-keyword">const</span> body = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getBody</span>({
            <span class="hljs-attr">arrays</span>: [<span class="hljs-string">&#x27;ownedPets&#x27;</span>]
        });

        <span class="hljs-comment">// body ~= {</span>
        <span class="hljs-comment">//     ownedPets: [&#x27;cat&#x27;],</span>
        <span class="hljs-comment">//     age: &#x27;23&#x27;,</span>
        <span class="hljs-comment">//     name: &#x27;April&#x27;</span>
        <span class="hljs-comment">// }</span>
    }]
});
</code></pre>
                    <h3>required</h3>
                    <p>The provided list of fields are not <code>null</code> or <code>undefined</code>. It&#39;s a quick way to throw a <code>422 Unprocessable Entity</code> error. These fields might still be empty, but at least something was sent and you know you can operate on them. When a <code>required</code> field is also an <code>arrays</code> field the array is sure to have at least one value.</p>
                    <h3>numbers</h3>
                    <p>The provided list of fields will throw a <code>422 Unprocessable Entity</code> error if any value is provided which parses into <code>NaN</code>. Otherwise they are converted into numbers.</p>
                    <p>When a <code>numbers</code> field is also an <code>arrays</code> field the array is all numbers.</p>
                    <h3>booleans</h3>
                    <p>The provided list of fields are converted into <code>false</code> if the value is falsy, <code>&#39;0&#39;</code>, or <code>&#39;false&#39;</code> (case insensitive), otherwise <code>true</code>. When a <code>booleans</code> field is also an <code>arrays</code> field the array is all booleans. When a <code>booleans</code> field is also a <code>numbers</code> field the value is first converted to a number and then to a boolean this is not recommended.</p>
                    <h3>validate</h3>
                    <p>After normalization, this method further ensures the validity of the data. Returning anything throws a <code>422 Unprocessable Entity</code> error.</p>
                    <pre><code class="hljs language-javascript">interface <span class="hljs-title class_">TBody</span> {
    <span class="hljs-attr">ownedPets</span>: string[];
    <span class="hljs-attr">age</span>: number;
    <span class="hljs-attr">name</span>: string;
}

<span class="hljs-title function_">createRoute</span>({
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/users&#x27;</span>,
    <span class="hljs-attr">actions</span>: [<span class="hljs-keyword">async</span> ({ getBody }) =&gt; {
        <span class="hljs-keyword">const</span> body = <span class="hljs-keyword">await</span> getBody&lt;<span class="hljs-title class_">TBody</span>&gt;({
            <span class="hljs-attr">arrays</span>: [<span class="hljs-string">&#x27;ownedPets&#x27;</span>],
            <span class="hljs-attr">required</span>: [<span class="hljs-string">&#x27;age&#x27;</span>, <span class="hljs-string">&#x27;name&#x27;</span>],
            <span class="hljs-attr">numbers</span>: [<span class="hljs-string">&#x27;age&#x27;</span>],
            validate (result) {
                <span class="hljs-keyword">if</span> (result.<span class="hljs-property">ownedPets</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">99</span>) {
                    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Too many pets&#x27;</span>;
                }
                <span class="hljs-keyword">if</span> (result.<span class="hljs-property">name</span>.<span class="hljs-property">length</span> &lt; <span class="hljs-number">3</span>) {
                    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Name is too short&#x27;</span>;
                }
            }
        });

        <span class="hljs-comment">// body ~= {</span>
        <span class="hljs-comment">//     ownedPets: [&#x27;Maggie&#x27;, &#x27;Ralph&#x27;],</span>
        <span class="hljs-comment">//     age: 23,</span>
        <span class="hljs-comment">//     name: &#x27;April&#x27;</span>
        <span class="hljs-comment">// }</span>
    }]
});
</code></pre>
                    <p>You know it is safe to use <code>result.ownedPets.length</code> in this example because it is listed as an <code>arrays</code> field and therefore certain to be an array. <code>result.name</code> is also safe to use because it is listed as a <code>required</code> field and therefore certain to exist.</p>
                </div>
            </main>
        </div>
        <footer class="bg-gray-900 h-16 w-full fixed flex items-center px-6 bottom-0 max-w-[90rem]">
            <p class="text-gray-600">&copy; Copyright 2024. All rights reserved.</p>
        </footer>
    </div>
</body>

</html>